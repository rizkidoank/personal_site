<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">

    <meta name="author" content="Rizki Rizki">
    <meta name="description" content="Story In previous post, I already share my experience when tried to automate manual process by created script to automatically create configs based on the input in requests. We found that the script are useful enough at that time, and reduced number of incidents caused by misconfiguration (yay!). Unfortunately, we faced with issues when the provisioned infrastructure not work as expected which caused by several things, example: invalid port definition which (again) inputted by human.">
    <meta name="keywords" content="blog,developer,personal,devops">

    

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Does Infra Testing Really Matters?"/>
<meta name="twitter:description" content="Story In previous post, I already share my experience when tried to automate manual process by created script to automatically create configs based on the input in requests. We found that the script are useful enough at that time, and reduced number of incidents caused by misconfiguration (yay!). Unfortunately, we faced with issues when the provisioned infrastructure not work as expected which caused by several things, example: invalid port definition which (again) inputted by human."/>

    <meta property="og:title" content="Does Infra Testing Really Matters?" />
<meta property="og:description" content="Story In previous post, I already share my experience when tried to automate manual process by created script to automatically create configs based on the input in requests. We found that the script are useful enough at that time, and reduced number of incidents caused by misconfiguration (yay!). Unfortunately, we faced with issues when the provisioned infrastructure not work as expected which caused by several things, example: invalid port definition which (again) inputted by human." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://rizkidoank.com/2019/02/23/does-infra-testing-really-matters/" />
<meta property="article:published_time" content="2019-02-23T01:05:00+00:00" />
<meta property="article:modified_time" content="2019-02-23T01:05:00+00:00" />


    
      <base href="https://rizkidoank.com/2019/02/23/does-infra-testing-really-matters/">
    
    <title>
  Does Infra Testing Really Matters? · rizkidoank&#39;s Blog
</title>

    
      <link rel="canonical" href="https://rizkidoank.com/2019/02/23/does-infra-testing-really-matters/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css" integrity="sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="/css/coder.min.3219ef62ae52679b7a9c19043171c3cd9f523628c2a65f3ef247ee18836bc90b.css" integrity="sha256-MhnvYq5SZ5t6nBkEMXHDzZ9SNijCpl8&#43;8kfuGINryQs=" crossorigin="anonymous" media="screen" />
    

    

    

    

    

    <link rel="icon" type="image/png" href="https://rizkidoank.com/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://rizkidoank.com/images/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.72.0" />
  </head>

  
  
  <body class="colorscheme-light"
        onload=""
  >
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      rizkidoank&#39;s Blog
    </a>
    
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://rizkidoank.com/posts/">Blog</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://rizkidoank.com/about/">About</a>
          </li>
        
      
      
    </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">Does Infra Testing Really Matters?</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2019-02-23T01:05:00Z'>
                February 23, 2019
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              2-minute read
            </span>
          </div>
          
          <div class="tags">
  <i class="fas fa-tag"></i>
    <a href="/tags/day-to-day/">day-to-day</a>
      <span class="separator">•</span>
    <a href="/tags/experience/">experience</a></div>

        </div>
      </header>

      <div>
        
        <h2 id="story">Story</h2>
<p>In previous post, I already share my experience when tried to automate manual process by created script to automatically create configs based on the input in requests. We found that the script are useful enough at that time, and reduced number of incidents caused by misconfiguration (yay!). Unfortunately, we faced with issues when the provisioned infrastructure not work as expected which caused by several things, example: invalid port definition which (again) inputted by human.</p>
<p>Just as usual, I tried to look for the possibilities to solve the issues and found about &lsquo;Test Driven Development in Infrastructure&rsquo;. If you read for the same thing, you&rsquo;ll find (at least per this article written), cloud infrastructure testing is quite different with general application testing. In general application you have unit test, but in infrastructure, even you&rsquo;re use Infrastructure as Code, unit test is still lacking.</p>
<h2 id="how-do-we-test-our-infrastructure">How Do We Test Our Infrastructure?</h2>
<p>First thing first, before we test the infrastructure itself I updated the previous scripts in [previous post]({{ site.baseurl }}{% post_url 2019-02-23-how-scripting-make-my-life-easier %}) to have input verifier / checker. Its basically read the input files and check whether the input are valid or not, and for any invalid input should resubmitted with a proper one.</p>
<p>After that, before we create / generate the configs, you need to create the test specification first by define what is your expected infrastructure. I was researched several tools and the chosen tools are <a href="inspec.io">inspec</a> and <a href="https://github.com/k1LoW/awspec">awspec</a>.</p>
<p>Test specification is ready, let&rsquo;s generate the configs and apply the changes. After the infra provisioned, run the test. Everything should looks good, if not then something wrong with either your configs or the test specification (create test spec sometimes harder than creating the configs itself :D ).</p>
<p>If everything looks good, you&rsquo;re good to go. Optional steps is to have a sanity check in reality, you might create scripts to test it automatically in your environment, or manually test it. After you confident enough, you might not need it anymore. Sanity check after running the test are good when you learn creating a proper test specification.</p>
<p>Done! I know that&rsquo;s not very straightforward, you might need to train yourself to build the habit. How about the results? Our incidents rate reduced but with overhead in implementation time.</p>
<h2 id="lesson-learned">Lesson Learned</h2>
<ul>
<li>Don&rsquo;t blindly process everything in front of you without properly check what is the requirement (especially for human submitted inputs), even you already have tools to process it automatically.</li>
<li>Test Driven Development process will help you to build confidence for what you&rsquo;ll do.</li>
</ul>

      </div>


      <footer>
        


        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "rizkidoank" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        
        
      </footer>
    </article>

    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script type="text/javascript" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js" id="MathJax-script"></script>
  <script>
    MathJax = {
      tex: {
        inlineMath: [
          ['$', '$'], ['\\(', '\\)']
        ],
        processEscapes: true,
        processEnvironments: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    };
  </script>
  </section>

      </div>

      
  <footer class="footer">
    <section class="container">
      
      
        ©
        
        2020
         Rizki Rizki 
      
      
         · 
        Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
      
      
        
      
    </section>
  </footer>

    </main>

    

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-78100671-2', 'auto');
	
	ga('send', 'pageview');
}
</script>


    

  </body>

</html>
